
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Wenbing Li</title>
  <meta name="author" content="Wenbing Li">

  
  <meta name="description" content="前几天，同事面试完回来哈哈大笑说，面试的人折腾了半天一个简单的程序没有搞定，还很牛逼哄哄地说我写程序从来不用if-else…连Mark同学听到也开心地笑了，呵呵 这几天路上无聊琢磨到底不用if-else怎么写程序，倒是想了几个办法。(使用JavaScript) 方法一：用while代替. 1
2 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.wenbing.dev/page2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Wenbing Li" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-52116997-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Wenbing Li</a></h1>
  
    <h2>It's all about the fundamentals.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.wenbing.dev" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/05/01/i-never-use-if-else/">“我从来不用if-else…”</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-05-01T08:00:00-07:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2010/05/01/i-never-use-if-else/#disqus_thread"
             data-disqus-identifier="http://blog.wenbing.dev/blog/2010/05/01/i-never-use-if-else/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>前几天，同事面试完回来哈哈大笑说，面试的人折腾了半天一个简单的程序没有搞定，还很牛逼哄哄地说我写程序从来不用if-else…连Mark同学听到也开心地笑了，呵呵</p>

<p>这几天路上无聊琢磨到底不用if-else怎么写程序，倒是想了几个办法。(使用JavaScript)</p>

<p>方法一：用while代替.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>function noifelsewhile(condition){
</span><span class='line'>    while(condition){
</span><span class='line'>  alert("I'm Jack");
</span><span class='line'>  break;
</span><span class='line'>    }
</span><span class='line'>    while(!condition){
</span><span class='line'>  alert("I'm Rose");
</span><span class='line'>  break;
</span><span class='line'>   }
</span><span class='line'>}
</span><span class='line'>noifelsewhile(true);
</span><span class='line'>noifelsewhile(false);</span></code></pre></td></tr></table></div></figure>


<p>方法二：用for代替.
和while一个套路</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>function noifelsefor(condition){
</span><span class='line'>   for(;condition;){
</span><span class='line'>  alert("I'm Jack")
</span><span class='line'>  break;
</span><span class='line'>   }
</span><span class='line'>
</span><span class='line'>   for(;!condition;){
</span><span class='line'>  alert("I'm Rose");
</span><span class='line'>  break;
</span><span class='line'>   }
</span><span class='line'>}
</span><span class='line'>noifelsefor(true);
</span><span class='line'>noifelsefor(false);</span></code></pre></td></tr></table></div></figure>


<p>办法三:三元表达式
因为三元表达式只能使用表达式，所以需要使用一个function用来支持多行statements</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>function noifelseternary(condition){
</span><span class='line'>    condition?function(){
</span><span class='line'>          alert("I'm Jack");
</span><span class='line'>      }():
</span><span class='line'>      function(){
</span><span class='line'>          alert("I'm Rose");
</span><span class='line'>      }();
</span><span class='line'>}
</span><span class='line'>noifelseternary(true);
</span><span class='line'>noifelseternary(false);</span></code></pre></td></tr></table></div></figure>


<p>办法四:逻辑与或-Default
在JavaScript中&amp;&amp;是logical and, 也可以称谓guard。如果第一个参数是false，那么返回第一个值，否则返回第二个值。而并不一定返回true或false；</p>

<p>var value = p &amp;&amp; p.name; /<em> The name value will only be retrieved from p if p has a value, avoiding an error. </em>/
||是logical or，也可以成为default。如果第一个参数是false，那么返回第二个值，反则返回第一个只。同样并不是一定返回true或者false。</p>

<p>value = v || 10; /<em> Use the value of v, but if v doesn&rsquo;t have a value, use 10 instead. </em>/
更多这个信息可以查看A Survey of the JavaScript Programming Language。
好，现在就运用这个两个操作来模拟if-else</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>function noifelsedefault(condition){
</span><span class='line'> (condition ||
</span><span class='line'>  function(){
</span><span class='line'>      alert("I'm Rose");
</span><span class='line'>  }())&&
</span><span class='line'>  function(){
</span><span class='line'>      alert("I'm Jack");
</span><span class='line'>  }();
</span><span class='line'>}
</span><span class='line'>noifelsedefault(true);
</span><span class='line'>noifelsedefault(false);</span></code></pre></td></tr></table></div></figure>


<p>办法五:逻辑与或-Guard
这一次把&amp;&amp;放到前面。这种逻辑与或在其他语言也有，比如python中的and，or</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>function noifelseguard(condition){
</span><span class='line'>  (condition &&
</span><span class='line'>  function(){
</span><span class='line'>      alert("I'm Jack");
</span><span class='line'>      return true; //注意一定要有return true，要保证这个函数返回true。
</span><span class='line'>                //其实办法4中需要保证第一个函数返回false，因为没有返回值就是null，所以就可以不用显式加return false了。
</span><span class='line'>  }())||
</span><span class='line'>  function(){
</span><span class='line'>      alert("I'm Rose");
</span><span class='line'>  }();
</span><span class='line'>}
</span><span class='line'>noifelseguard(true);
</span><span class='line'>noifelseguard(false);</span></code></pre></td></tr></table></div></figure>


<p>还有其他的办法吗？大家来变态~，:)
五一快乐~</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/01/30/zhan-dian-zhong-yu-hui-fu-le/">站点终于恢复了</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-01-30T23:00:00-08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2010/01/30/zhan-dian-zhong-yu-hui-fu-le/#disqus_thread"
             data-disqus-identifier="http://blog.wenbing.dev/blog/2010/01/30/zhan-dian-zhong-yu-hui-fu-le/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>非常感谢redphp.net,这家host不错。虽然源于国内无耻的严打，经过一点折腾，终于回到正常。我一个小小blog就这么麻烦，真不知道国内那些网站怎么过来的。</p>

<p>希望国内互联网环境能恢复理性健康。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/11/29/using-jconsole-in-websphere-application-server/">用jconsole来管理WebSphere AppServer的MBean</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-11-29T01:40:19-08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2009/11/29/using-jconsole-in-websphere-application-server/#disqus_thread"
             data-disqus-identifier="http://blog.wenbing.dev/blog/2009/11/29/using-jconsole-in-websphere-application-server/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>最近需要在WebSphere中做点魔术，所以要使用WAS(WebSphere Application Server)中的管理能力。JMX是WAS的管理的核心，苦于<a href="http://publib.boulder.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.javadoc.doc/public_html/mbeandocs/index.html">WAS Mbean文档</a>并不是那么详细，这个时候就可以使用jconsole了。jconsole是一个JDK自带的JMX兼容的JVM管理工具，可以用它来可视化的查看和操作Mbean。</p>

<p>在启动jconsole时需要一些WAS的jar，所以我这样来做：</p>

<ul>
<li>创建一个文件夹，例如：C:\programs\jconsole</li>
<li>将一些需要的jar 拷贝进入到这个文件夹的libs中：</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>com.ibm.ws.admin.client_6.1.0.jar   （在&lt;WAS_HOME&gt;/runtimes)   
</span><span class='line'>ibmorbapi.jar  (在&lt;WAS_HOME&gt;/java/jre/lib)
</span><span class='line'>ibmorb.jar (在&lt;WAS_HOME&gt;/java/jre/lib)
</span><span class='line'>ibmcfw.jar (在&lt;WAS_HOME&gt;/java/jre/lib)</span></code></pre></td></tr></table></div></figure>


<ul>
<li>编写一个bat文件</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bat'><span class='line'><span class="k">set</span> <span class="nv">JAVA_HOME</span><span class="o">=</span><span class="s2">&quot;C:\Program Files\Java\jdk1.6.0_16&quot;</span>
</span><span class='line'><span class="k">set</span> <span class="nv">WAS6</span>.<span class="m">1</span>_JARS<span class="o">=</span>C:\programs\jconsole\libs
</span><span class='line'>
</span><span class='line'><span class="k">set</span> <span class="nv">BOOTJARS</span><span class="o">=</span><span class="nv">%WAS6</span>.<span class="m">1</span>_JARS%\ibmorbapi.jar
</span><span class='line'><span class="k">set</span> <span class="nv">BOOTJARS</span><span class="o">=</span><span class="nv">%BOOTJARS%</span>;<span class="nv">%WAS6</span>.<span class="m">1</span>_JARS%\ibmorb.jar
</span><span class='line'><span class="k">set</span> <span class="nv">BOOTJARS</span><span class="o">=</span><span class="nv">%BOOTJARS%</span>;<span class="nv">%WAS6</span>.<span class="m">1</span>_JARS%\ibmcfw.jar
</span><span class='line'>
</span><span class='line'><span class="k">set</span> <span class="nv">CLASSPATH</span><span class="o">=</span><span class="nv">%WAS6</span>.<span class="m">1</span>_JARS%\com.ibm.ws.admin.client_<span class="m">6</span>.<span class="m">1</span>.<span class="m">0</span>.jar
</span><span class='line'><span class="k">set</span> <span class="nv">CLASSPATH</span><span class="o">=</span><span class="nv">%CLASSPATH%</span>;<span class="nv">%JAVA_HOME%</span>\lib\tools.jar
</span><span class='line'><span class="k">set</span> <span class="nv">CLASSPATH</span><span class="o">=</span><span class="nv">%CLASSPATH%</span>;<span class="nv">%JAVA_HOME%</span>\lib\jconsole.jar
</span><span class='line'>
</span><span class='line'><span class="nv">%JAVA_HOME%</span>\bin\jconsole  -J-Xbootclasspath<span class="n">/p:%BOOTJARS%</span> -J-Djava.class.path<span class="o">=</span><span class="nv">%CLASSPATH%</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>使用如下URL来远程连接WAS中的JMX server</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bat'><span class='line'>service:jmx<span class="nl">:iiop</span>:<span class="n">//localhost:2809/jndi/JMXConnector</span>
</span></code></pre></td></tr></table></div></figure>


<p>其中这个端口号是RMI Connector的端口号，可以在启动的logs发现。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bat'><span class='line'>ADMC<span class="m">0026</span>I:The RMI Connector is available at port  <span class="m">2809</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>或者到admin console中查看
Application servers > server1 >   Administration Services > JMX   connectors</p>

<p>好，这样就可以了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/09/14/keep-writing/">一直在写</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-09-14T08:25:15-07:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2009/09/14/keep-writing/#disqus_thread"
             data-disqus-identifier="http://blog.wenbing.dev/blog/2009/09/14/keep-writing/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>刚和同学聊天时，问我blog怎么好长时间都没有更新了。看了看上篇文章的日期，离现在也有两个月有余了，有些惭愧。最近在做一些有意思的技术调研，倒是会在接下来的文章中分享一些。其实这段日子也在写一些东西，不过不在自己的blog上面了罢了。</p>

<ul>
<li><p>带给PHP 和 Java 世界的双赢  (<a href="http://www.netvibes.com/shawnzhu">朱可</a>&amp;me) -《 程序员》杂志 2009年09月刊</p></li>
<li><p>Ajax - 超越桌面的Web 用户体验 - 《<a href="http://www.webspherechina.net">WebSphere 中国</a>》纸质杂志第二期</p></li>
<li><p><a href="http://www.ibm.com/developerworks/cn/websphere/library/techarticles/0909_smash_dojo_Ajaxdev/index.html">在WebSphere sMash中使用Dojo开发Ajax的Web应用程序</a> - developerWorks</p></li>
</ul>


<p>时间总是匆匆，让我们继续前行&hellip;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/07/07/read-ppk-on-javascript/">读《PPK on JavaScript》</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-07T16:53:46-07:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2009/07/07/read-ppk-on-javascript/#disqus_thread"
             data-disqus-identifier="http://blog.wenbing.dev/blog/2009/07/07/read-ppk-on-javascript/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p> <a href="http://www.quirksmode.org/">PPK</a>也是在JavaScript世界中的风云人物了，这位老兄对于浏览器端的技术以及各种浏览器的兼容性有极其丰富的经验。在这本书中，他谈了很多关于可访问性(Accessibility)和可用性(Usability)的一些问题，非常有趣。比如他说“不同的开发者以不同的方式诠释了JavaScript的目的。简单而形象地说就是：深受CSS革命影响的传统Web开发者们，创建的是瘦的、可访问性很强、乱糟糟的JavaScript代码；而来至服务器端开发的‘资深程序员们’用完美的面向对象代码、创建的是胖的、可访问性很差的Ajax客户端”。显然，ppk同学应该属于写乱糟糟但可访问性很好的人，而现在我做的大量事情却是后者。他更多相信现在的Ajax只是一种泡沫，当这个泡沫破灭并且大量‘资深服务器程序员’消失时，JS的开发者会更加注重可访问性。  可能体会不到ppk经历浏览器各种痛苦的经历，但是总体来说浏览器都在坚定地遵循Web标准，JavaScript的支持也会成为浏览器必备要求。anyway，事情总在发展，好戏在后头。分享一下我觉得这本书中几个有趣的地方。</p>

<h3>可访问性和可用性</h3>

<p>可访问性(<a href="http://en.wikipedia.org/wiki/Accessibility">Accessibility</a>)是指你的网页对于任何人、在任何环境下都是可持续访问的。特别是指某些用户，比如弱视、浏览器不支持JavaScript或者另外一些情况，比如用户使用Mobile使用你的网页等等。而可用性(Usability)是指使用或者浏览你的网页的容易程度(这里我们只谈web页面),通常它指我们能更有效率地使用、更容易地学习以及更加满意地使用它。举个例子来说，你让你的web页面支持IE6，或者支持mobile都是在提高它的可访问性；而是用CSS来改善布局让用户更容易阅读、使用JavaScript做一些对用户有帮助的互动都是在提高它的可用性。</p>

<p>Web页面都是由下面三个层组成的，通过它们我们可以了解到它们之间的关系以及它们和可访问性和可用性之间的关系。</p>

<ul>
<li><p>HTML结构层</p></li>
<li><p>CSS表现层</p></li>
<li><p>JavaScript行为层</p></li>
</ul>


<p><img src="http://liwenbing.cn/wp-content/uploads/2009/07/web3layers-300x245.PNG" alt="web3layers" /></p>

<p>Web页面的三个层，HTML结构层是必需的基础，CSS表现层和JavaScript行为层建于它之上。所以在客户端代码中不得不关注的话题就是这三个层的关注点分离。具体探讨一下这三个的分离：</p>

<p><strong>表现与结构的分离(CSS与HTML)</strong></p>

<p>这个分离很好理解，基本思想就是确保HTML来定义结构，而所有的表现都定义在另外单独的CSS文件中。HTML不应该出现<code>&lt;font&gt;</code>标签和用于表现的表格。如果想定义字体和布局，都应该在CSS中处理。</p>

<p>大部分情况下面我们知道达到某个效果是修改表现或者结构是清楚的。但是有些情况下当更改HTML和修改CSS都可以时，你需要慎重地思考到底哪种是合理的。比如一个节点，你希望它不显示，那么你可以在HTML上面删除该节点或者使用CSS来“display:none”。当这种情况是，需要自己分析所需要的效果属于哪种情况，然后修改合理的层。</p>

<p><strong>行为与结构的分离(JavaScript与HTML)</strong></p>

<p>这个也比较好理解，就是不要把任何的JavaScript代码写到你的HTML页面中。应该把所有JavaScript代码放到一个独立的js文件中，然后将它链入到所有需要它的HTML页面中。</p>

<p>关于这个有一个有趣的话题就是：<strong>无侵入脚本编程(unobtrusive scripting).</strong>简单来说它就是通过HTML和JavaScript的分离以达到页面的可访问性和可用性的最大化。既JavaScript失效了，页面还是可阅读和理解的；而通过引入脚本和JavaScript的hook，就可以让脚本运行，增强可用性。</p>

<p><strong>行为与表现的分离(JavaScript与CSS)</strong></p>

<p>这个的分离是非常复杂的，而且并没有总结出什么特别系统的规则。CSS和JavaScript是有重合的灰色地带的，有时候完全不能确切地把某个效果归为表现还是行为。比如是使用CSS中的hover还是JavaScript的mouseover/mouseout。基本来说你自己得根据具体情况做合理的选择吧。</p>

<h3>事件捕捉模型</h3>

<p>在HTML的事件模型中有一个有趣的话题。这个简单的问题就是：如果一个节点和它的父亲节点都有对同一个事件的处理，那么到底哪个事件会被先执行呢？这就是关于事件的冒泡和捕获。事件冒泡是说事件从它的目标元素开始，沿着文档树依次向上冒泡，并触发相应的事件处理函数。而事件的捕捉是刚好相反的，它从文档的第一级开始，然后沿着文档树向下游，知道事件目标为止。</p>

<p>在W3C模型中，捕获和冒泡都会发生。当一个事件触发时，它先被文档捕获，到了事件目标后，再冒泡到文档顶层。而传统模型和微软模型只支持事件冒泡，而不支持事件捕获。所以最好是限制使用事件冒泡。其实在我们的实际编程中，很少关心这个话题，是因为大部分情况我们都只使用了事件冒泡。</p>

<p>更加具体的可以查看ppk的文章：<a href="http://www.quirksmode.org/js/events_order.html">http://www.quirksmode.org/js/events_order.html</a></p>

<h3>小记</h3>

<p>应该来说PPK所谈的JavaScript是一个更加全面的浏览器编程的世界，让人可以全面来了解这个世界包含的东西。其实大部分的内容在PPK的网站上都有，值得读读。<a href="http://www.quirksmode.org/js/contents.html">http://www.quirksmode.org/js/contents.html</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/06/17/blue-blood/">蓝色的血液</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-17T09:51:16-07:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2009/06/17/blue-blood/#disqus_thread"
             data-disqus-identifier="http://blog.wenbing.dev/blog/2009/06/17/blue-blood/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>我是一名pure blue，从在IBM实习到开始工作到现在，在这样的一家百年老店工作，虽然有太多让人抱怨的地方，但是你会喜欢这里的人（虽然不是全部），并且从心里慢慢接受它的文化和价值观。这样的一个公司的价值观是令人敬佩的，足以指导你做人做事。特别不喜欢一些人张口闭口说这不如人那不爽，只怕自己没有自信罢了。不足就努力去改变它，你真受不了了就quit，what&rsquo;s the big deal？一个人在外人面前骂娘（自己老娘）的时候，是不可能得到尊重的，只是哗众取宠罢了。当你流淌着蓝色的血液时，你是自豪的。</p>

<p>今早一聊天之不爽，故有此文。下面摘除一些从《品味蓝色》上句子。我很喜欢。</p>

<blockquote><p>任何一名优秀的IBM人，当你问他成功之道的时候，他也许无法教会你具体的流程和方法，但他一定会告诉你，没有什么，不过是秉承诚信负责之道好好做人、好好做事罢了，因为在IBM，机会永远青睐于那些有好的工作表现和正直诚实的人。 &ndash; 周伟焜</p>

<p>学会尊重别人，同时赢得别人尊重，这很重要。尊重别人身上的优点，你会变得更宽容。执着、专业、深入是赢得他人尊重的根本。谁都有缺点，包括我们的公司。但是要学会用宽容的心来对待周围的一切。得到尊重，你每天都会快乐。 &ndash; 郭希文</p>

<p>所谓分享成功其实就是看你怎样Increase your influence，这并不是仅指依靠手中的权力发号施令，而是指能够提供给别人有价值的意见或见地。同时，在团队合作中，“诚信（integrity）”则是最重要的原则。无论对公司，还是对在公司团队中工作的个体，诚信都是立足之本，信任之基。对一个科学家来说，诚信就更重要，科学是不容半点虚假成分的，谁想投机取巧，违背科学规律，只能是搬起石头砸自己的脚。&ndash; 叶天正</p>

<p>认真积极地工作，让我在事业上可以不断进步；以尊重、信任的态度与家人、同事沟通，让我得到了家人的支持，同事的尊敬，从而拥有了和谐美满的家庭和成功的事业。面对这一切，我最深的感受就是四个字——“知福惜福”。 &ndash;于雪莉</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/06/17/smash-stakeholder-meeting/">sMash Stakeholder Meeting</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-17T08:41:37-07:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2009/06/17/smash-stakeholder-meeting/#disqus_thread"
             data-disqus-identifier="http://blog.wenbing.dev/blog/2009/06/17/smash-stakeholder-meeting/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>上周进行了sMash的stakeholder meeting，在这个会上我介绍了Flow的新的特性，并且进行Demo的演示。我们的演示大概从5分钟开始，之前是产品开发经理的一些介绍。本人英文口语比较烂，不知道他们到底听懂了没有。详细的信息可以看<a href="http://www.projectzero.org/blog/index.php/2009/06/15/june-stakeholder-meeting-replay/">projectzero 的blog</a>。Vido在Viddler上，至于为什么在viddler上，我想可能是为了照顾中国用户无法访问YouTube的原因吧，呵呵。</p>

<p><a href="http://www.viddler.com/explore/projectzero/videos/4/">http://www.viddler.com/explore/projectzero/videos/4/</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/06/05/dojo-widget-destructor/">Dojo Widget的析构过程</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-05T04:09:13-07:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2009/06/05/dojo-widget-destructor/#disqus_thread"
             data-disqus-identifier="http://blog.wenbing.dev/blog/2009/06/05/dojo-widget-destructor/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>了解dojo widget（或者说dijit）的析构过程，不仅让你更加了解整个dijit的生命周期，同样也能帮助我们在自己定制化的dijit中如何正确地释放资源。（这里讨论的dojo应该是在0.9或者以上版本的)</p>

<p>下面是dijit的析构过程：</p>

<pre><code>                        destroyRecursive
                    /                      \
                destroy                   destroyDescendants
        /        |        \
uninitialize  disconnect() destroyRendering
</code></pre>

<p>一些常见的<strong>错误</strong>是如下：</p>

<ul>
<li><p>使用destroy()去销毁一个dijit。我们应该使用destroyRecursive()去销毁一个dijit，从上面的过程可以看出，destroyRecursive()会销毁其孩子widgets。</p></li>
<li><p>使用destory()去销毁定制dijit中的资源。更可怕的是有的代码可能是直接覆盖destroy，而根本不调用_Widget中的destory。uninitialize()才是dijit暴露出来给定制化widget进行析构的stub function。</p></li>
</ul>


<h3>结论</h3>

<p><strong>使用destroyRecursive()去销毁dijit，使用uninitialize()在定制化的dijit来释放自己的资源</strong>。destroyDescendants，destroyRendering基本上用不到，也不要去覆盖它们。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/06/05/why-ff3-cannot-load-local-javascript-file/">为什么Firefox 3不能加载本地的JavaScript文件了？</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-05T01:36:38-07:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2009/06/05/why-ff3-cannot-load-local-javascript-file/#disqus_thread"
             data-disqus-identifier="http://blog.wenbing.dev/blog/2009/06/05/why-ff3-cannot-load-local-javascript-file/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>一段时间来一直受这样的困扰，就是我的Firefox无法运行本地的dojo的测试文件。一直以为是我的firefox或者机器出了什么问题，就只好去使用IE或者Chrome去运行这些测试例子，可惜不能用firebug的确让人很不爽。</p>

<p>今天在firebug查看了一些错误情况，报错居然是“Access to restricted URI denied”。这个明显是跨域访问的错误，但是本地文件怎么报这样的错呢？在Firefox的about:config搜索了一下policy,居然找到了原因所在，原来Firefox对于本地文件也进行了同源访问的安全设置,配置参数是：security.fileuri.strict_origin_policy。这个新的设置只是在firefox 3才被加入，并且默认是开启的。不过你也可以将这个关掉，这样就可以如同以前那样运行本地的dojo测试用例，或者其它你想本地加载的JavaScript文件。</p>

<p><a href="http://liwenbing.cn/2009/06/05/why-ff3-cannot-load-local-javascript-file/local-file-p-origin-policy/"><img src="http://liwenbing.cn/wp-content/uploads/2009/06/local-file-p-origin-policy-300x42.png" alt="local-file-p-origin-policy" /></a></p>

<p>继续在google了一下，找了这个"feature"的由来，<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=230606">https://bugzilla.mozilla.org/show_bug.cgi?id=230606</a>，大概是说本地的文件如果没有这样的限制，可以访问本机的其他文件，这样会造成安全隐患。John Resig（Father of  jQuery) 也有一个blog关于这个问题，<a href="http://ejohn.org/blog/tightened-local-file-security/">http://ejohn.org/blog/tightened-local-file-security/</a>，下面的评论也挺值得看看的。</p>

<p><strong>More Links: </strong></p>

<ul>
<li><p><a href="http://www.dojotoolkit.org/support/faq/why-does-dojo-fail-load-file-urls-firefox-3">http://www.dojotoolkit.org/support/faq/why-does-dojo-fail-load-file-urls-firefox-3</a></p></li>
<li><p><a href="http://kb.mozillazine.org/Security.fileuri.origin_policy">http://kb.mozillazine.org/Security.fileuri.origin_policy</a></p></li>
<li><p><a href="http://kb.mozillazine.org/Security.fileuri.strict_origin_policy">http://kb.mozillazine.org/Security.fileuri.strict_origin_policy</a></p></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/05/21/javascript-equal-type-conversion/">JavaScript中==等同运算符的类型转换</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-05-21T21:59:18-07:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2009/05/21/javascript-equal-type-conversion/#disqus_thread"
             data-disqus-identifier="http://blog.wenbing.dev/blog/2009/05/21/javascript-equal-type-conversion/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>这周在给一些新员工讲JavaScript的时候，谈了==和===的区别，本质来说，===是严格的等同运算符，要求两者类型相同并且值相同；而==运算符在做比较时，会做一定的类型转换。我们在使用过程中应该使用===而不是==，因为这种类型转换后的比较往往都不是你想要的。当时列出了corckfork最喜欢一些例子：</p>

<pre><code>    '' == '0'          // false
    0 == ''            // true
    0 == '0'           // true
    false == 'false'   // false
    false == '0'       // true
    false == undefined // false
    false == null      // false
    null == undefined  // true
    ' \t\r\n ' == 0    // true
</code></pre>

<h3>转换规则</h3>

<p>当时有人就问了，那么在做类型转换的时候倒是等式的左边向右边转，还是反过来呢？其实这些都是不对的，我们去看看ECMAScript的规范，会发现它有对于等同运算符做类型转换很明确的比较算法，下面我将其翻译如下:
<strong>对于比较x==y，</strong></p>

<p>1.如果x和y类型不同，那么到14步；
//
//2-13步，为类型相同的比较
//
14.如果x是null，y是undefined，返回true；
15.如果x是undefined，y是null，返回true；
16.如果x是Number，y是String，将y转化成Number，然后再比较；
17.如果x是String，y是Number，将x转化成Number，然后再比较；
18.如果x是Boolean，那么将x转化成Number，然后再比较；
19.如果y是Boolean，那么将y转化成Number，然后再比较；
20。如果x是String或者Number，y是Object，那么将y转化成基本类型，再进行比较；
21.如果x是Object，y是String或者Number，将x转化成基本类型，再进行比较；
22.其他情况均返回false；</p>

<p>ECMA这帮人写的算法过程比较啰嗦，简单一句话来概括就是，对于基本类型Boolean，Number，String，三者之间做比较时，总是向Number进行类型转换，然后再比较；如果有Object，那么将Object转化成这三者，再进行比较；对于null和undefined，只有x，y分别是它们时才相同，其他都为false。</p>

<p>另外，对于转化到Number的算法，细节可以来看ECMAScript的规范，但是基本上下面这个<a href="http://www.jibbering.com/faq/faq_notes/type_convert.html#tcNumber">几个表</a>可以覆盖大部分的内容:</p>

<p>type-convert to number (+col) : String Values.</p>

<p>&ldquo;&rdquo;
(empty
string)
&ldquo;-1.6&rdquo;
&ldquo;0&rdquo;
&ldquo;1&rdquo;
&ldquo;1.6&rdquo;
&ldquo;8&rdquo;
&ldquo;16&rdquo;
&ldquo;16.8&rdquo;</p>

<p>+col</p>

<p>0</p>

<p>-1.6</p>

<p>0</p>

<p>1</p>

<p>1.6</p>

<p>8</p>

<p>16</p>

<p>16.8</p>

<p>type-convert to number (+col) : String Values.</p>

<p>&ldquo;123e-2&rdquo;
&ldquo;010&rdquo;
(Octal)
&ldquo;0x10&rdquo;
(Hex)
&ldquo;0xFF&rdquo;
(Hex)
&ldquo;-010&rdquo;
&ldquo;-0x10&rdquo;
&ldquo;xx&rdquo;</p>

<p>+col</p>

<p>1.23</p>

<p>10</p>

<p>16</p>

<p>255</p>

<p>-10</p>

<p>NaN</p>

<p>NaN</p>

<p>type-convert to number (+col) : Other Values.</p>

<p>undefined
null
true
false
new Object()
function(){
return;
}</p>

<p>+col</p>

<p>NaN</p>

<p>0</p>

<p>1</p>

<p>0</p>

<p>NaN</p>

<p>NaN</p>

<p>再回头来看看corkford给出的例子，然后使用上面的规则去判断；</p>

<pre><code> '' == '0'          // false
//类型相同，毫无疑问，值不同，所以结果为false

0 == ''            // true
//String要像Number转化，''是空String，根据上面的表，转成0，所以结果是true

0 == '0'           // true
//String要像Number转化，根据上面的转化Number表，'0'转成0，所以结果是true

false == 'false'   // false
//有Boolean，转化成Number，所以第一步转化后为0=='false'；
//然后'false'向Number转，结果是NaN,最后变成比较0==NaN,那么肯定是false。
//（NaN和任何相比都是false，就算是自己也是false， NaN==NaN //false)

false == '0'       // true
//有Boolean，转化成Number，经过第一次转化就成了0=='0';
//就变成了上面的第3个例子，所以是true

false == undefined // false
//对于undefined和null，只有两边分别是两者才是true，其他都是false；所以是false

false == null      // false
//对于undefined和null，只有两边分别是两者才是true，其他都是false；所以是false

null == undefined  // true
//对于undefined和null，只有两边分别是两者才是true，其他都是false；所以是true

' \t\r\n ' == 0    // true
//对于String，先转成Number，对于空String，都将转成0，所以转化后成为0==0,结果为true
//（注意，空字符不仅仅是只是空格，还包括\t\r\n等等，更多可以见ECMAScript spec的9.3.1）
</code></pre>

<h2>总结</h2>

<p>虽然我们了解了==这个坏东西的本质，但是在我们的实际JavaScript编程中是要避免使用==，而是去使用===这个严格的比较运算符。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="3">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="1">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2019/04/10/blogging-again/">Blogging Again</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/20/cucumber-best-practices/">Cucumber Best Practices</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/13/using-atom-editor-in-ubuntu/">Using Atom Editor in Ubuntu</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/24/only-allow-get-for-specified-request-path-using-mod-security/">Only Allow GET for Specified Request Path Using Mod Security</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/16/start-blogging/">Start Blogging</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2019 - Wenbing Li -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'wbinglee';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
